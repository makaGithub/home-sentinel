# ============================================
# HOME-SENTINEL CONFIGURATION
# ============================================

# ============================================
# Видеопоток
# ============================================

# URL видео потока (0 для веб-камеры, rtsp:// для IP-камеры)
VIDEO_URL=rtsp://YOUR_CAMERA_IP:8554/stream

# Переподключение при потере потока
STREAM_RECONNECT_ATTEMPTS=50
STREAM_RECONNECT_DELAY=2.0

# ============================================
# YOLO (детекция объектов)
# ============================================

# Модель YOLO
YOLO_MODEL=yolov8n.pt

# Устройство (cuda, cpu, или номер GPU)
YOLO_DEVICE=cuda

# Пороги confidence (0.0-1.0)
YOLO_CONFIDENCE_THRESHOLD=0.25
YOLO_PERSON_CONFIDENCE=0.20

# Игнорируемые классы (через запятую)
YOLO_IGNORE_CLASSES=

# ============================================
# Распознавание лиц (InsightFace)
# ============================================

# Модель (только antelopev2 для совместимости с Immich)
INSIGHTFACE_MODEL=antelopev2

# Порог схожести лиц (0.0-1.0)
FACE_SIM_THRESHOLD=0.5

# ============================================
# Анти-дребезг (стабилизация детекции)
# ============================================

# Сколько кадров для "стабильного" появления объекта
MIN_STABLE=30

# Сколько кадров объект может отсутствовать до удаления
MAX_MISSING=150

# ============================================
# Скриншоты
# ============================================

# Включить сохранение скриншотов
SCREENSHOTS_ENABLED=true

# Порт веб-интерфейса для просмотра скриншотов
SCREENSHOTS_WEB_PORT=80

# ============================================
# База данных Immich (PostgreSQL)
# ============================================

IMMICH_DB_HOST=YOUR_DB_HOST
IMMICH_DB_PORT=5432
IMMICH_DB_NAME=immich
IMMICH_DB_USER=postgres
IMMICH_DB_PASSWORD=YOUR_DB_PASSWORD

# БД для статистики home-sentinel
VISION_DB_NAME=home-sentinel

# ============================================
# Immich API
# ============================================

IMMICH_URL=https://your-immich-url.example.com
IMMICH_TOKEN=YOUR_IMMICH_API_TOKEN

# ============================================
# MQTT
# ============================================

MQTT_BROKER=YOUR_MQTT_BROKER
MQTT_PORT=1883
MQTT_TOPIC=ai/events

# Интервал отправки событий (секунды)
SEND_INTERVAL=3

# ============================================
# NVIDIA GPU
# ============================================

NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=all

# ============================================
# Деплой на удаленный хост
# ============================================

REMOTE_HOST=YOUR_REMOTE_HOST
REMOTE_USER=YOUR_USER
REMOTE_PATH=/srv/home-sentinel

# Метод: git или rsync
DEPLOY_METHOD=rsync

# Опции деплоя
COPY_ENV=true
SETUP_DOCKER=false
BUILD_REMOTE=false
RESTART_SERVICES=true
STOP_BEFORE_UPDATE=true

# SSH_OPTS=-i ~/.ssh/id_rsa -p 22

# ============================================
# Прочее
# ============================================

NO_ALBUMENTATIONS_UPDATE=1
