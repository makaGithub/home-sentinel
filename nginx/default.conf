server {
    listen 80;
    server_name _;

    # Корневая директория для статики
    root /usr/share/nginx/html;
    index index.html;

    # Включаем просмотр директорий для screenshots (для API получения списка файлов)
    location /screenshots/ {
        alias /screenshots/;
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
        autoindex_format html;
        
        # Кэширование изображений
        location ~* \.(jpg|jpeg|png|gif|ico|svg)$ {
            expires 1h;
            add_header Cache-Control "public, immutable";
        }
    }

    # Главная страница с галереей
    location / {
        try_files $uri $uri/ /index.html =404;
    }

    # Кэширование статических ресурсов
    location ~* \.(css|js)$ {
        expires 7d;
        add_header Cache-Control "public, immutable";
    }
}

